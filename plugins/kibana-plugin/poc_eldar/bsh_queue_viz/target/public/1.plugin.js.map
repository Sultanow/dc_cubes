{"version":3,"file":"1.plugin.js","sources":["/plugin:bshQueueViz/plugins\\bsh_queue_viz\\public\\application.tsx","/plugin:bshQueueViz/plugins\\bsh_queue_viz\\public\\components\\app.tsx"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.renderApp = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactDom = _interopRequireDefault(require(\"react-dom\"));\n\nvar _app = require(\"./components/app\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst renderApp = ({\n  notifications,\n  http\n}, {\n  navigation\n}, {\n  appBasePath,\n  element\n}) => {\n  _reactDom.default.render( /*#__PURE__*/_react.default.createElement(_app.BshQueueVizApp, {\n    basename: appBasePath,\n    notifications: notifications,\n    http: http,\n    navigation: navigation\n  }), element);\n\n  return () => _reactDom.default.unmountComponentAtNode(element);\n};\n\nexports.renderApp = renderApp;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BshQueueVizApp = void 0;\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _styles = require(\"@material-ui/core/styles\");\n\nvar _Box = _interopRequireDefault(require(\"@material-ui/core/Box\"));\n\nvar _InputBase = _interopRequireDefault(require(\"@material-ui/core/InputBase\"));\n\nvar _IconButton = _interopRequireDefault(require(\"@material-ui/core/IconButton\"));\n\nvar _Search = _interopRequireDefault(require(\"@material-ui/icons/Search\"));\n\nvar _Snackbar = _interopRequireDefault(require(\"@material-ui/core/Snackbar\"));\n\nvar _Alert = _interopRequireDefault(require(\"@material-ui/lab/Alert\"));\n\nvar _Table = _interopRequireDefault(require(\"@material-ui/core/Table\"));\n\nvar _TableBody = _interopRequireDefault(require(\"@material-ui/core/TableBody\"));\n\nvar _TableCell = _interopRequireDefault(require(\"@material-ui/core/TableCell\"));\n\nvar _TableContainer = _interopRequireDefault(require(\"@material-ui/core/TableContainer\"));\n\nvar _TableHead = _interopRequireDefault(require(\"@material-ui/core/TableHead\"));\n\nvar _TableRow = _interopRequireDefault(require(\"@material-ui/core/TableRow\"));\n\nvar _Paper = _interopRequireDefault(require(\"@material-ui/core/Paper\"));\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nvar _eui = require(\"@elastic/eui\");\n\nvar _common = require(\"../../common\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache() { if (typeof WeakMap !== \"function\") return null; var cache = new WeakMap(); _getRequireWildcardCache = function () { return cache; }; return cache; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nconst useStyles = (0, _styles.makeStyles)(theme => (0, _styles.createStyles)({\n  search: {\n    flexGrow: 1,\n    padding: '2px 4px',\n    display: 'flex',\n    width: 400,\n    margin: 'auto'\n  },\n  input: {\n    marginLeft: theme.spacing(1),\n    flex: 1\n  },\n  iconButton: {\n    padding: 10\n  }\n}));\n\nclass Row {\n  constructor(queueName, queueEnteredTime, queueEnteredSize, queueLeftTime, queueLeftSize) {\n    _defineProperty(this, \"queueName\", void 0);\n\n    _defineProperty(this, \"queueEnteredTime\", void 0);\n\n    _defineProperty(this, \"queueEnteredSize\", void 0);\n\n    _defineProperty(this, \"queueLeftTime\", void 0);\n\n    _defineProperty(this, \"queueLeftSize\", void 0);\n\n    this.queueName = queueName;\n    this.queueEnteredTime = queueEnteredTime;\n    this.queueEnteredSize = queueEnteredSize;\n    this.queueLeftTime = queueLeftTime;\n    this.queueLeftSize = queueLeftSize;\n  }\n\n}\n\nconst itemTableRows = new Array();\n\nconst BshQueueVizApp = ({\n  basename,\n  http,\n  navigation\n}) => {\n  // Use React hooks to manage state.\n  const [itemSearch, setItemSearch] = (0, _react.useState)();\n  const [statusText, setStatusText] = (0, _react.useState)();\n  const [rows, setTable] = (0, _react.useState)(itemTableRows);\n\n  const [open, setOpen] = _react.default.useState(false);\n\n  const onClickHandler = () => {\n    const body = {\n      item: itemSearch\n    };\n    http.post(\"/api/bsh_queue_viz/itemsearch\", {\n      body: JSON.stringify(body)\n    }).then(res => {\n      //console.log(res.data.aggregations);\n      let buckets = res.data.aggregations.group_by_queue.buckets;\n      let bucketDetails = \"\";\n      itemTableRows.splice(0);\n      buckets.forEach(function (item, index) {\n        let queueEntered = item.queue_enter.hits.hits[0]._source;\n        let queueLeft = item.queue_left.hits.hits[0]._source;\n        itemTableRows.push(new Row(item.key, queueEntered.timestamp, queueEntered.size, queueLeft.timestamp, queueLeft.size));\n        setTable(itemTableRows);\n      }); //1400457484\n\n      setStatusText(\"Searched for \" + itemSearch + \", buckets found: \" + buckets.length + bucketDetails);\n      setOpen(true);\n    });\n  };\n\n  const handleChange = event => {\n    setItemSearch(event.target.value);\n  };\n\n  const handleClose = (event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n\n    setOpen(false);\n  };\n\n  const classes = useStyles(); // Render the application DOM.\n  // Note that `navigation.ui.TopNavMenu` is a stateful component exported on the `navigation` plugin's start contract.\n\n  return /*#__PURE__*/_react.default.createElement(_reactRouterDom.BrowserRouter, {\n    basename: basename\n  }, /*#__PURE__*/_react.default.createElement(navigation.ui.TopNavMenu, {\n    appName: _common.PLUGIN_ID,\n    showSearchBar: true\n  }), /*#__PURE__*/_react.default.createElement(_eui.EuiPage, {\n    restrictWidth: \"1000px\"\n  }, /*#__PURE__*/_react.default.createElement(_eui.EuiPageBody, null, /*#__PURE__*/_react.default.createElement(_eui.EuiPageHeader, null, /*#__PURE__*/_react.default.createElement(_eui.EuiTitle, {\n    size: \"l\"\n  }, /*#__PURE__*/_react.default.createElement(\"h1\", null, /*#__PURE__*/_react.default.createElement(\"div\", {\n    id: \"bshQueueViz.helloWorldText\"\n  }, _common.PLUGIN_NAME)))), /*#__PURE__*/_react.default.createElement(_eui.EuiPageContent, {\n    style: {\n      border: 'none',\n      boxShadow: 'none',\n      backgroundColor: '#f5f5f5'\n    }\n  }, /*#__PURE__*/_react.default.createElement(_eui.EuiPageContentBody, null, /*#__PURE__*/_react.default.createElement(_Paper.default, {\n    component: \"form\",\n    className: classes.search\n  }, /*#__PURE__*/_react.default.createElement(_InputBase.default, {\n    id: \"bshQueueViz.itemSearchField\",\n    className: classes.input,\n    placeholder: \"Search Item\",\n    onChange: handleChange\n  }), /*#__PURE__*/_react.default.createElement(_IconButton.default, {\n    className: classes.iconButton,\n    onClick: onClickHandler\n  }, /*#__PURE__*/_react.default.createElement(_Search.default, null))))), /*#__PURE__*/_react.default.createElement(_Box.default, {\n    m: 2\n  }), /*#__PURE__*/_react.default.createElement(_eui.EuiPageContent, null, /*#__PURE__*/_react.default.createElement(_eui.EuiPageContentBody, null, /*#__PURE__*/_react.default.createElement(_TableContainer.default, {\n    component: _Paper.default\n  }, /*#__PURE__*/_react.default.createElement(_Table.default, {\n    \"aria-label\": \"simple table\"\n  }, /*#__PURE__*/_react.default.createElement(_TableHead.default, null, /*#__PURE__*/_react.default.createElement(_TableRow.default, null, /*#__PURE__*/_react.default.createElement(_TableCell.default, null, \"Queue\"), /*#__PURE__*/_react.default.createElement(_TableCell.default, {\n    align: \"right\"\n  }, \"time entered\"), /*#__PURE__*/_react.default.createElement(_TableCell.default, {\n    align: \"right\"\n  }, \"size when entered\"), /*#__PURE__*/_react.default.createElement(_TableCell.default, {\n    align: \"right\"\n  }, \"time left\"), /*#__PURE__*/_react.default.createElement(_TableCell.default, {\n    align: \"right\"\n  }, \"size when left\"))), /*#__PURE__*/_react.default.createElement(_TableBody.default, null, rows.map(row => /*#__PURE__*/_react.default.createElement(_TableRow.default, {\n    key: row.queueName\n  }, /*#__PURE__*/_react.default.createElement(_TableCell.default, {\n    component: \"th\",\n    scope: \"row\"\n  }, row.queueName), /*#__PURE__*/_react.default.createElement(_TableCell.default, {\n    align: \"right\"\n  }, row.queueEnteredTime), /*#__PURE__*/_react.default.createElement(_TableCell.default, {\n    align: \"right\"\n  }, row.queueEnteredSize), /*#__PURE__*/_react.default.createElement(_TableCell.default, {\n    align: \"right\"\n  }, row.queueLeftTime), /*#__PURE__*/_react.default.createElement(_TableCell.default, {\n    align: \"right\"\n  }, row.queueLeftSize)))))), /*#__PURE__*/_react.default.createElement(_Box.default, {\n    m: 6\n  }), /*#__PURE__*/_react.default.createElement(_Snackbar.default, {\n    open: open,\n    autoHideDuration: 6000,\n    onClose: handleClose\n  }, /*#__PURE__*/_react.default.createElement(_Alert.default, {\n    onClose: handleClose,\n    severity: \"success\"\n  }, statusText)))))));\n};\n\nexports.BshQueueVizApp = BshQueueVizApp;"],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}